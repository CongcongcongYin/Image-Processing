im=imread('lenna512.bmp');
load('50.dat')
Qmat=[1,2,2,4,4,4,4,8,8,8,8,8,8,8,8,16;
      2,2,2,4,4,4,4,8,8,8,8,8,8,8,8,16;
      2,2,2,4,4,4,4,8,8,8,8,8,8,8,8,16;
      4,4,4,4,4,4,4,8,8,8,8,8,8,8,8,16;
      4,4,4,4,4,4,4,8,8,8,8,8,8,8,8,16;
      4,4,4,4,4,4,4,8,8,8,8,8,8,8,8,16;
      4,4,4,4,4,4,4,8,8,8,8,8,8,8,8,16;
      8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16;
      8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16;
      8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16;
      8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16;
      8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16;
      8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16;
      8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16;
      8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16;
      16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16;];
N=8;
QP=50;
file_name='50.dat';
[imo] = decompress_im(Qmat, QP, N, file_name);
subplot(1,2,1);imshow(im);title('original')
subplot(1,2,2);imshow(uint8(imo));title('decompress')
psnr = calculate_psnr(imo, im)